<!DOCTYPE html>
<html lang="en">
<head>
    <title><%= title %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/public/style.css">
    <script src="/jquery/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/jsvalidate/validator.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#deleteButton").click(function () {
                $("#deleteModal").modal();
            });
        });
    </script>

</head>
<body>
<% include ../templates/header.ejs %>
<div class="container">
    <div class="panel panel-default">
        <div class="panel-heading text-center"><h1><%= heading %></h1></div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-4">
                    <b>P-Line: </b><%= requiredResource.pLine %><br/><br/>
                    <b>Company: </b><%= requiredResource.company %><br/><br/>
                    <b>Resource Type: </b><%= requiredResource.resourceType %><br/><br/>
                    <b>Grade: </b><%= requiredResource.grade %><br/><br/>
                </div>
                <div class="col-sm-4">
                    <b>Stage: </b><%= requiredResource.stage %><br/><br/>
                    <b>Job Code: </b><%= requiredResource.jobCode %><br/><br/>
                    <b>System: </b><%= requiredResource.system %><br/><br/>
                </div>
                <div class="col-sm-4">
                    <b>Component: </b><%= requiredResource.component %><br/><br/>
                    <b>Pricing Flag: </b><%= requiredResource.pricingFlag %><br/><br/>
                    <b>Reason: </b><%= requiredResource.reason %><br/><br/>
                </div>
            </div>
            <div class="row">
                <br/>

                <div class="panel-body">
                    <div class="col-sm-6">
                        <a href="/project/<%= projectCode %>/<%= changeItem %>/<%= requiredResource._id %>/update"
                           class="btn btn-success btn-block"
                           role="button">Edit Details</a>
                    </div>
                    <div class="col-sm-6">
                        <button class="btn btn-danger btn-block" id="deleteButton">Delete</button>
                        <div class="modal fade" id="deleteModal" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header" style="padding:35px 50px;">
                                        <button type="button" class="close" data-dismiss="modal">&times;
                                        </button>
                                        <h4><span class="glyphicon glyphicon-remove"></span> Remove a Required Resource
                                        </h4>
                                    </div>
                                    <div class="modal-body" style="padding:40px 50px;">
                                        <h5>Are you sure you want to remove <%= requiredResource.roleName %>?</h5>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="/project/<%= projectCode %>/<%= changeItem %>/<%= requiredResource._id %>/delete"
                                                   class="btn btn-success btn-block"
                                                   role="button"><span
                                                            class="glyphicon glyphicon-ok"></span>
                                                    Yes</a>
                                            </div>
                                            <div class="col-sm-6">
                                                <button type="submit" class="btn btn-danger btn-block "
                                                        data-dismiss="modal"><span
                                                            class="glyphicon glyphicon-remove"></span>
                                                    No
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading text-center"><h3>Impact</h3></div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-6">


                    <form id="impactForm" method="post"
                          action="/project/<%= projectCode %>/<%= changeItem %>/<%= requiredResource._id %>/addImpact"
                          data-toggle="validator" role="form">
                        <div class="form-group has-feedback">

                            <div class="form-group has-feedback">
                                <label for="month">Month:</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><span
                                                class="glyphicon glyphicon-menu-down"></span></span>
                                    <select id="month" name="month" class="form-control" required>
                                        <option value="" disabled selected>Select</option>
                                        <option value="0">January</option>
                                        <option value="1">February</option>
                                        <option value="2">March</option>
                                        <option value="3">April</option>
                                        <option value="4">May</option>
                                        <option value="5">June</option>
                                        <option value="6">July</option>
                                        <option value="7">August</option>
                                        <option value="8">September</option>
                                        <option value="9">October</option>
                                        <option value="10">November</option>
                                        <option value="11">December</option>
                                    </select>
                                </div>
                                <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                <div class="help-block with-errors"></div>
                            </div>
                            <div class="form-group has-feedback">
                                <label for="year">Year:</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><span
                                                class="glyphicon glyphicon-menu-down"></span></span>
                                    <select id="year" name="year" class="form-control" required>
                                        <option value="" disabled selected>Select</option>
                                        <option value="2017">2017</option>
                                        <option value="2018">2018</option>
                                    </select>
                                </div>
                                    <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                    <div class="help-block with-errors"></div>

                            </div>


                            <div class="form-group has-feedback">
                                <label for="days" class="control-label">Number of Days:</label>
                                <div class="input-group">
                                    <span class="input-group-addon">1</span>
                                    <input type="text" class="form-control" name="days" id="days"
                                           pattern="^[0-2]?[0-9]$" maxlength="2" required>
                                </div>
                                <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>


                        <button type="submit" class="btn btn-success btn-block">
                            <span class="glyphicon glyphicon-plus "></span> Add to Impact
                        </button>
                    </form>
                </div>
                <div class="col-sm-6">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>Month</th>
                                <th>Days</th>
                                <th>Delete</th>
                            </tr>
                            </thead>
                            <tbody>
                            <% requiredResource.impact.forEach(function(impact){ %>
                            <tr>
                                <td><%=impact.month.getMonth()+1;%> / <%=impact.month.getFullYear();%></td>
                                <td><%= impact.days %></td>
                                <td>
                                    <a href="/project/<%= projectCode %>/<%= changeItem %>/<%= requiredResource._id %>/<%= impact._id %>/delete">Delete</a>
                                </td>
                            </tr>
                            <% }); %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


        </div>
    </div>


</div>
</div>
</div>
</body>
</html>