
<!DOCTYPE html>
<html lang="en">
<head>
    <title><%= title %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/public/stylesheets/style.css">
    <link rel="stylesheet" href="bootstrap-editable/css/bootstrap-editable.css">
    <script src="/jquery/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/jsvalidate/validator.min.js"></script>
    <script>$(".glyphicon-pencil").click(function() {
            var pen = $(this);
            pen.css("visibility", "hidden");
            $(this).prev().attr("contenteditable", "true").focusout(function() {
                $(this).removeAttr("contenteditable").off("focusout");
                pen.css("visibility", "visible");
            });
        });
    </script>
    <style>
        h5.smallP {
            margin-bottom: 5px;
            margin-top: 5px;
        }
        h1.smallP {
            margin-bottom: 5px;
            margin-top: 5px;
        }
    </style>
</head>

<body>
<% include ../templates/header.ejs %>
<div class="container">
    <div class="panel panel-default">
        <div class="panel-heading text-left">

            <h1 class="smallP">
                User Name
                <a href="#" id="userName" type="button" class="btn btn-default btn-sm" aria-label="Left align">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </a>
            </h1>
        </div>
        <div class="panel-body">
            <div class="media">

                <div class="media-left media-top">
                    <img src="/image/avatar.jpg" class="img-circle" style="width:250px">
                </div>
                <div class="media-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong><font size="4">Email:</font></strong></p>
                            <p><font size="4"><%= email %></font></p>
                            <p><img src="/image/slackLogo.svg" class="img-circle" style="width:19px">
                                <strong><font size="4">Slack Handle:</font></strong></p>
                            <p><font size="4"><%= slack %></font></p>
                        </div>

                        <div class="col-md-6">
                            <ul class="nav nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#changePassword">Change Password</a></li>
                                <li><a data-toggle ="tab" href="#delete">Delete Account</a></li>
                            </ul>

                            <div class="tab-content">
                                <div id="changePassword" class="tab-pane fade in active">
                                    <form action="/user/changePassword" method="post" data-toggle="validator" role="form">
                                        <div class="form-group">
                                            <div class="input-group" style="margin-top: 20px;">
                                                <span class="input-group-addon">T</span>
                                                <input type="password" class="form-control" id="oldPassword"
                                                       name="oldPassword"
                                                       placeholder="Enter old password" required>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group">
                                                <span class="input-group-addon">T</span>
                                                <input type="password" class="form-control" id="newPassword"
                                                       name="newPassword" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                                       placeholder="Enter new password"
                                                       required>
                                            </div>
                                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                            <div class="help-block with-errors"></div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group">
                                                <span class="input-group-addon">T</span>
                                                <input type="password" class="form-control" id="newPasswordCheck"
                                                       name="newPasswordCheck" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                                       placeholder="Confirm new password"
                                                       data-match="#newPassword"
                                                       required>
                                            </div>
                                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                            <div class="help-block with-errors">
                                                Minimum 8 chars. Must include upper/lower case and a digit.
                                            </div>
                                            <p></p>
                                            <input type="submit" value="Change Password" class="btn btn-success btn-m btn-black">
                                        </div>
                                    </form>
                                </div>
                                <div id="delete" class="tab-pane fade">
                                    <form action="user/deleteUser" data-toggle="validator" role="form">
                                        <div class="form-group">
                                            <div class="input-group" style="margin-top: 20px;">
                                                <span class="input-group-addon">T</span>
                                                <input type="password" class="form-control" id="password" name="password"
                                                       placeholder="Enter your password"
                                                required>
                                            </div>
                                        </div>
                                        <input type="submit" value="Permanently Delete Account"
                                               class="btn btn-danger btn-m btn-black">
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>